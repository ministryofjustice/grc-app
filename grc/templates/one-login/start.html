{% extends 'base.html' %}
{% import "govuk-design-system-templates/error-summary.html" as error_summary %}
{% import "govuk-design-system-templates/radios.html" as radios %}
{% import "govuk-design-system-templates/text-input.html" as textInput %}
{% import "govuk-design-system-templates/continue.html" as continue %}

{% block title %}GOV.UK One Login Test{% endblock %}

{% block content %}
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            {{ error_summary.renderFor(form) }}

            <h1 class="govuk-heading-l">
                {{ _('Have you already started an application?') }}
            </h1>

            <p class="govuk-body">
                {{ _('If this is your first time using this service, we will give you a reference number') }}.
                {{ _('You will need this if you return to your application') }}.
            </p>
            <p class="govuk-body">
                {{ _('If you are returning to your application, you will need your application reference number') }}.
                {{ _('If you have lost or forgotten it, you can start a new application') }}.
            </p>

            <div class="govuk-inset-text">
                {{ _('Before you start, make sure you have read the guidance on') }}
                <a href="https://www.gov.uk/apply-gender-recognition-certificate" target="_blank" class="govuk-link">
                    {{ _('applying for a Gender Recognition Certificate (opens in a new tab)') }}
                </a>.
            </div>

            <form method="POST">
                {{ form.hidden_tag() }}

                {% macro lostReferenceHtmlBlock() %}
                    <p class="govuk-hint">
                        {{ _('You will need to start a new application') }}
                    </p>
                {% endmacro %}
                {{ radios.renderFor(
                    form,
                    fieldName='has_reference',
                    radiosOptions={
                        'questionIsPageHeading': true,
                        'conditionalOptions': [
                            ('HAS_REFERENCE',
                            textInput.renderFor(
                                form,
                                fieldName='reference',
                                textInputForOptions={
                                    'labelOptions': { 'htmlOrText': _('Reference number') },
                                    'classes': 'govuk-input--width-10'
                                }
                            )),
                            ('LOST_REFERENCE', lostReferenceHtmlBlock())
                        ]
                    }
                ) }}

                {{ continue.renderFor() }}
            </form>
        </div>
    </div>
{% endblock %}
